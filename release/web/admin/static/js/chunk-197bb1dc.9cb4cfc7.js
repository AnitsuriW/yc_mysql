(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-197bb1dc"],{"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function c(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function u(e,t,a){var n=c(),r=e-n,u=20,s=0;t="undefined"===typeof t?500:t;var l=function(){s+=u;var e=Math.easeInOutQuad(s,n,r,t);o(e),s<t?i(l):a&&"function"===typeof a&&a()};l()}var s={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[5,10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&u(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&u(0,800)}}},l=s,d=(a("fb6a7"),a("2877")),p=Object(d["a"])(l,n,r,!1,null,"90fd946a",null);t["a"]=p.exports},4593:function(e,t,a){},47268:function(e,t,a){"use strict";a("4593")},"6bdc":function(e,t,a){},beaf:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container course-list"},[t("div",{staticClass:"filter-container"},[t("el-form",{attrs:{inline:!0,model:e.queryParam}},[t("el-form-item",{attrs:{label:"课程名称"}},[t("el-input",{attrs:{placeholder:"输入课程名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.queryParam.title,callback:function(t){e.$set(e.queryParam,"title",t)},expression:"queryParam.title"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.searchLoading},on:{click:e.handleFilter}},[e._v("查询")]),t("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("新建课程")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.tableData,border:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"ID",prop:"id",width:"80",align:"center"}}),t("el-table-column",{attrs:{label:"课程名称",prop:"title","min-width":"200"}}),t("el-table-column",{attrs:{label:"封面",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.coverUrl?t("el-image",{staticStyle:{width:"80px",height:"50px","border-radius":"4px"},attrs:{src:n.coverUrl,"preview-src-list":[n.coverUrl],fit:"cover"}}):t("span",{staticStyle:{color:"#909399"}},[e._v("无封面")])]}}])}),t("el-table-column",{attrs:{label:"资源状态",align:"center",width:"240"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("div",{staticClass:"unit-status"},[t("el-tag",{attrs:{type:n.units.length?"success":"info",size:"mini"}},[e._v(" 共 "+e._s(n.units.length)+" 个单元 ")]),e._l(n.units,(function(a){return t("div",{key:a.id,staticClass:"unit-item"},[t("div",{staticClass:"unit-title"},[e._v(e._s(a.title))]),a.resources.length?t("div",{staticClass:"resource-list"},e._l(a.resources,(function(a){return t("el-tag",{key:a.id,attrs:{size:"mini",type:"info"}},[e._v(e._s(a.originalName))])})),1):t("span",{staticClass:"no-res"},[e._v("无资源")])])}))],2)]}}])}),t("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-popconfirm",{attrs:{title:"确认删除该课程？"},on:{confirm:function(t){return e.handleDelete(n.id)}}},[t("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete"},slot:"reference"})],1)]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParam.pageIndex,limit:e.queryParam.pageSize},on:{"update:page":function(t){return e.$set(e.queryParam,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParam,"pageSize",t)},pagination:e.fetchData}})],1)},r=[],i=a("c7eb"),o=a("5530"),c=a("1da1"),u=(a("d81d"),a("14d9"),a("333d")),s=a("cabd"),l={components:{Pagination:u["a"]},data:function(){return{queryParam:{title:"",pageIndex:1,pageSize:10},listLoading:!1,tableData:[],total:0,searchLoading:!1}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.prev=1,t.next=4,s["b"].pageList(e.queryParam);case 4:a=t.sent,e.tableData=a.response.list.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{coverUrl:e.coverPath?"".concat(e.coverPath):"",units:e.units.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{resources:e.resources||[]})}))})})),e.total=a.response.total,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error("数据加载失败:",t.t0),e.$message.error("数据加载失败");case 13:return t.prev=13,e.listLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,9,13,16]])})))()},handleFilter:function(){this.queryParam.pageIndex=1,this.fetchData()},handleCreate:function(){this.$router.push("/education/course/edit")},handleDelete:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s["b"].deleteCourse(e);case 3:t.$message.success("删除成功"),t.fetchData(),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.$message.error((null===(n=a.t0.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||"删除失败");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},d=l,p=(a("47268"),a("2877")),f=Object(p["a"])(d,n,r,!1,null,"8c336d06",null);t["default"]=f.exports},cabd:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("b775");t["b"]={pageList:function(e){return Object(n["a"])("/api/admin/education/course/page",e)},select:function(e){return Object(n["a"])("/api/admin/education/course/select/".concat(e))},deleteCourse:function(e){return Object(n["a"])("/api/admin/education/course/delete/".concat(e))},uploadResource:function(e,t){return Object(n["a"])("/api/admin/education/upload/".concat(t),e)}};var r=function(e){return Object(n["a"])("api/admin/education/create",e)}},fb6a7:function(e,t,a){"use strict";a("6bdc")}}]);